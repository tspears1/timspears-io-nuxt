@use '@/assets/scss/abstracts/' as *;

@keyframes project-next-media {
    0%,
    20% {
        opacity: 0;
        scale: 1.3;
    }
    100% {
        opacity: 1;
        scale: 1;
    }
}

@keyframes project-next-content-sm {
    0%,
    30% {
        translate: 0 calc(var(--content-y-lvh) / 4 * -1);
    }
    100% {
        translate: 0 0;
    }
}

@keyframes project-next-screen-sm {
    0% {
        translate: 0 calc(var(--content-y-lvh) / 2 * -1);
    }
    100% {
        translate: 0;
    }
}

@keyframes project-next-content-lg {
    0%,
    10% {
        translate: calc(var(--content-x) / 4 * -1);
    }
    100% {
        translate: -1px;
    }
}

@keyframes project-next-screen-lg {
    0% {
        translate: calc(var(--content-x) / 2 * -1);
    }
    100% {
        translate: 0;
    }
}

.project-next {
    @include splitting($gap: 0.45em, $parent: 'link-text');

    &__grid {
        clip-path: inset(0);
        display: grid;
        grid-template-columns: 1fr;
        grid-template-rows: repeat(2, calc(var(--content-y-lvh) / 2));
        grid-template-areas: 'MEDIA' 'CONTENT';

        @include breakpoint(md) {
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: var(--content-y-svh);
            grid-template-areas: 'MEDIA CONTENT';
        }
    }

    &__content {
        animation: project-next-content-sm 1s var(--ease-in-out-cubic);
        background: var(--section-color-background);
        display: grid;
        grid-area: CONTENT;
        grid-template-rows: 1fr max-content;
        padding-block: var(--section-padding-y);
        padding-inline: var(--section-padding-x);
        z-index: 1;

        @include breakpoint(md) {
            animation-name: project-next-content-lg;
            padding-block-end: calc(var(--section-padding-y) / 2);
        }

        &::before {
            @include absolute(0);
            animation: project-next-screen-sm 1s var(--ease-in-out-circ);
            background: var(--section-color-background);
            content: '';
            z-index: -1;

            @include breakpoint(md) {
                animation-name: project-next-screen-lg;
            }
        }
    }

    &__text {
        @include grid-content(center x );
        @include grid-items( x center);
        display: grid;
        gap: fluid(2, 4, false);
        grid-template-columns: 1fr;
    }

    &__eyebrow {
        &:is(.section__eyebrow) {
            grid-column: span 1;
        }
    }

    &__heading {
        --text-align: center;
        text-align: var(--text-align);

        .text-motion__word,
        .text-motion__letter {
            clip-path: inset(-0.5rem);
        }
    }

    &__button {
        --button-scale: 0.85;

        @include breakpoint(md) {
            --button-scale: 1;
        }
    }

    &__footer {
        @include grid-items(x center);
        display: grid;
        padding-block-start: fluid(0.75, 3, false);
    }

    &__link {
        align-items: center;
        color: var(--c-theme-700);
        display: grid;
        font-size: fluid(0.75, 0.875, false);
        font-weight: var(--font-weight-medium);
        gap: 0.75rem;
        grid-template-columns: 2.25rem auto;
        letter-spacing: 0.1em;
        text-transform: uppercase;
    }

    &__link-icon {
        @include svg-contain(2.25rem);

        svg {
            scale: -1;
        }
    }

    &__media {
        background: var(--c-theme-950);
        clip-path: inset(0);
        grid-area: MEDIA;
    }

    &__picture {
        @include size(100%, 100%);
        animation: project-next-media 1s linear;
        display: block;
    }

    &__img {
        @include image-fit(cover);
    }

    &__picture,
    &__content,
    &__content::before {
        animation-delay: calc(var(--view-progress) * -1s);
        animation-fill-mode: both;
        animation-iteration-count: 1;
        animation-play-state: paused;
    }
}